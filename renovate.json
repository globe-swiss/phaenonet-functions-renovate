{
	"extends": [
		"config:best-practices",
		":disableDependencyDashboard"
	],
	"enabledManagers": [
		"pep621",
		"github-actions"
	],
	"uv": {
		"fileMatch": [
			"^uv.lock$"
		]
	},
	"automerge": false,
	"automergeType": "branch"
}



# add a workflow to create requirements.txt or https: //docs.renovatebot.com/configuration-options/#postupgradetasks

on:
  pull_request:
    types: [opened, synchronize
]
    paths:
      - 'uv.lock'

jobs:
  generate-deployment-files:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install uv
        uses: astral-sh/setup-uv@v7
      - name: Generate requirements.txt
        run: uv export --format requirements-txt --no-hashes --no-dev > requirements.txt
      - name: Commit requirements.txt
        run: |
          git config --global user.name 'github-actions[bot
]'
          git config --global user.email 'github-actions[bot
]@users.noreply.github.com'
          git add requirements.txt
          git commit -m "Regenerate requirements.txt from uv.lock" || echo "No changes"
          git push

# for automerge
* test must run on renovate/branch
* exclude archive/branch